version: 0.2

env:
  variables:
    TF_VAR_TARGET_ACCOUNT_ROLE: adf-terraform-role  # The IAM Role Terraform will assume to deploy resources
    TF_IN_AUTOMATION: true
    TF_CLI_ARGS: "-no-color"
    TF_STAGE: "apply"

phases:
  install:
    runtime-versions:
      python: 3.9
  build:
    commands:
      - python adf-build/helpers/terraform/get_accounts.py
      - bash adf-build/helpers/terraform/adf_terraform.sh
